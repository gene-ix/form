# form

このコードを使用した際に発生した一切の責任は負いかねます。

## 概要

ただのシンプルな申込フォームですが、オブジェクト指向をかなり意識して実装しています。  
処理がメインのため、デザイン・エラーメッセージなどは簡易的となっています。  
また、一部の付随する処理（メール通知など）は割愛しています。（呼出部分は実装しています）

## 機能

入力画面→確認画面→完了画面の3ページ構成です。  
入力内容はCSVで保存し、添付画像も保存します。  
また、申込通知を管理者と申込者へ送信します。

## バリデーション

入力値の検証は以下の3段階で行います。

### ブラウザ標準の入力チェック

required、pattern、maxlength属性などを用いて検証を行います。  
入力値に問題がある状態で送信ボタンを押した場合、ブラウザ標準のポップアップが表示されます。  
また、CSSの擬似クラス`:invalid`により視覚的効果も実装します。  

### javascriptでの送信前（入力時）チェック

ファイル形式チェックや、一つ以上の選択が必須のチェックボックスリスト、確認用メールアドレスの再入力チェックなど、ブラウザ標準の入力チェックが行えない要素については、入力時にjavascriptで検証を行います。  
該当の項目に隣接する場所へ予め非表示のチェックボックス（必須・POSTに含まない）とメッセージを配置しておき、チェックボックスがtrueの時にはメッセージを非表示、falseの時には表示するようCSSで実装します。  
javascriptで入力値を確認し、問題がある場合には該当のチェックボックスを操作し、メッセージの表示を切り替えます。  
このチェックボックスは必須項目のため、未チェックの際には入力値に問題があるということで、送信できないようになります。

### PHPでの送信後チェック

CSRFチェックを行います。  
また上記2つの検証から漏れた不正な値をcheck.php表示時に検証します。  
必須項目の入力確認や、指定形式の検証など、全項目に対して再度行います。  
送信値に問題があった場合は、該当するエラーメッセージを表示し、以降の処理を中止します。  
確認画面から送信・保存処理への送信時には、この検証のみを同様に行います。